{% extends 'ProjectBody/Body.html' %}
{% load static %}
{% block contenid %}
 <div class="row mt-4">
        <div class="col-12">
           <div class="col-lg-6">
                    <a style="border-radius: 0px" href="#" rel="action" data-json='{"action": "add","id":""}'
                       class="btn btn-success sbox">
                        <i class="fa fa-plus"></i>
                        Nuevo Registro
                    </a>
                </div>
            <div class="card">
                <!-- Card header -->
                <div class="card-header">
                    <h5 class="mb-0">Prodcutos</h5>
                    <p class="text-sm mb-0">
                        Listado de productos
                    </p>
                </div>
                <div class="table-responsive">
                    <table class="table table-push" id="datatable-search">
                        <thead class="table-info">
                        <tr>
                            <th>   <i class="fa fa-image" aria-hidden="true"> Imagen</i></th>
                            <th> <i class="fa fa-home" aria-hidden="true"> Ubicación</i></th>
                            <th> <i class="fa fa-circle" aria-hidden="true"> Marca</i></th>
                            <th> <i class="fa fa-circle" aria-hidden="true"> Tipo de Categoría</i></th>
                            <th>  <i class="fa fa-square" aria-hidden="true"> Descripción</i></th>
                            <th> <i class="fa fa-square" aria-hidden="true"> Nombre</i></th>
                            <th><i class="fa fa-money">Precio</i></th>
                            <th><i class="fa  fa-check-square-o">Estado</i></th>
                            <th> <i class="fa fa-cog" aria-hidden="true"> Acción</i></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for art in articulo %}
                            <tr>
                                <td class="text-sm font-weight-normal">
                                    <a href="/media/{{ art.image }}" data-lightbox="mygallery" data-title="{{ art.nombre }}">
                                        <img  src="/media/{{ art.image }}" title="ver imagen" class="img-fluid center" alt="Responsive image" style="width:100px; height:100px;"  >
                                    </a>
                                </td>
                              <td class="text-sm font-weight-normal">{{ art.m_ubicacion.descripcion }}</td>
                                <td class="text-sm font-weight-normal">{{ art.m_marca.nombre }}</td>
                                <td class="text-sm font-weight-normal">{{ art.m_tipocategoria.descripcion }}</td>
                                <td class="text-sm font-weight-normal">{{ art.descripcion }}</td>
                                <td class="text-sm font-weight-normal">{{ art.nombre }}</td>
                                <td class="text-sm font-weight-normal">${{ art.precio}}</td>
                                <td class="text-sm font-weight-normal">     {% if art..status %}
                                                    <span class="badge  bg-gradient-success">Activo</span>
                                                {% else %}
                                                    <span class="badge  bg-gradient-danger">Inactivo</span>
                                                {% endif %}</td>
                                <td class="text-sm font-weight-normal">
                                    <br>
                                    <ul class="d-md-inline-flex list-inline">
                                        <li><a class="btn bg-gradient-info" href="#" rel="action" data-json='{"action":"edit","id":"{{ art.id }}"}'><i class="fa fa-edit"></i> Editar</a></li>
                                        <li><a class="btn bg-gradient-danger" href="#modal" data-bs-toggle="modal" data-bs-target="#myModal" rel="action" data-json='{"action":"elim","id":"{{ art.id }}"}'><i class="fa fa-trash-o"></i> Eliminar</a></li>
                                    </ul></td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="100"> <center>No existen registros</center></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>    <!-- te ayuda no redireccionar la pagina verbatim -->
    <!--
{% verbatim %}
    <div id="app">
        {{ msg }}
      <button class="btn btn-success btn-md" v-on:click="getArticles">Add 1</button>
  <p>Se ha hecho clic en el botón de arriba {{ counter }} veces.</p>
    </div>
    {% endverbatim %}-->
{% endblock %}
{% block frmodal %}
    <div class="modal face animated rotateIn" id="mdsucur"  role="dialog">
    </div>
{% endblock %}
{% block jscript %}

    <script>

    var app= new Vue({
          el:"#app",
       data(){
              articules:[]
          },
        methods:{
          getArticles: function() {
              this.request('add')
          },
          getprimienArticles: function() {
             // this.request()
          },

          request:function (q) {
        const axios = require('axios').default;

          axios.get('articulo/?action='+q)
          .then(function (response) {
            // handle success
            alert((response)
          })
          .catch(function (error) {
            // handle error
              alert((error);
          })
          .then(function () {
            // always executed
          });

            }
        },
        beforeMount(){
              this.getArticles()
        }

    });


   /*var app= new Vue({
          el:"#app",
       data(){
          return{
              msg:"Hello world!"
          }}

    });*/

   /*     {% if messages %}
            {% for message in messages %}
                Swal.fire({
                    title: 'Información!',
                    text: '{{ message }}',
                    html:'{{ message }}',
                    showCloseButton: true,
                    confirmButtonColor: "#71C78D",
                    confirmButtonText: 'OK',
                    imageWidth: 400,
                    imageHeight: 200,
                    imageAlt: 'Custom image',
                });
            {% endfor %}
        {% endif %}

        function myFunction(url) {
            $('#mdsucur').load(url,function () {
                $('#mdsucur').modal({backdrop: 'static', keyboard: false,show:true,remote:false});
            });
            return false;
        }

        $('.chosen-select').chosen();*/
    </script>
{% endblock %}
